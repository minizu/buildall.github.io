<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>用standard来管理JavaScript代码规范 | 赵彪的博客</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">赵彪的博客</a><span class="subtitle">把生命浪费在美好的代码上</span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" class="sidebar-nav-item">Archives</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>用standard来管理JavaScript代码规范</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">2017-08-12</div><div class="post-tags"><a class="post-tag-link" href="/tags/JavaScript/">JavaScript</a></div></div></div><article><div class="container post"><p>怎么才能使前端团队写的JavaScript代码都有统一的风格、符合规范呢?</p>
<p>要解决这个问题大概要做下面几件事:</p>
<ol>
<li>制定规范标准</li>
<li>写代码时执行代码规范</li>
<li>检查代码是否符合规范</li>
<li>修改不符合规范的代码</li>
</ol>
<p>那么，到底具体应该如何实施以上几个步骤呢？我的回答是你什么都不用做了，有人已经帮你把以上四步全部做好了！</p>
<p>是的，这个好用的工具就是本文要介绍的JavaScript规范库，<a href="https://github.com/standard/standard" target="_blank" rel="external">standarad</a>。</p>
<h2 id="关于standard"><a href="#关于standard" class="headerlink" title="关于standard"></a>关于standard</h2><p>standard是什么?<br>一个开源的JS代码规范库，它做了以下事情</p>
<ol>
<li>制定了所谓standard(标准)的JS代码规范</li>
<li>配合编辑器插件可以实时检查代码规范以及语法错误</li>
<li>通过执行命令检查代码规范以及语法错误</li>
<li>自动修复(可以直接修复的)不合规范的代码,使其符合规范</li>
</ol>
<h2 id="关于standard中的代码规范"><a href="#关于standard中的代码规范" class="headerlink" title="关于standard中的代码规范"></a>关于standard中的代码规范</h2><p>  可以说JS这门语言的魅力之一就是自由、开放的写法，相比python、Go等语言，JS写起来自由的多。但是这种自由本身在团队合作的项目里也带来了很多的不便，于是我们需要指定代码规范，但是应该以什么标准来制定规范呢？缩进到底是4格还是2格、结尾要不要用分号、花括号和if语句在同一行还是另起一行？诸如此类的问题，从功能和逻辑上来讲并没有标准答案，因为无论怎么选，代码都能运行，功能都能实现。所以在JS程序员的世界里经常会有诸如缩进、分号、换行等写法的争论，standard库对此给出的结论是，这种争论对于getting stuff done并无意义，我们要停止这方面的争论，把精力放在解决问题上。</p>
<p>  standard官方给出的说法如下:</p>
<p><em>There are lots of debates online about tabs vs. spaces, etc. that will never be resolved. These debates just distract from getting stuff done. At the end of the day you have to ‘just pick something’, and that’s the whole philosophy of standard – its a bunch of sensible ‘just pick something’ opinions. Hopefully, users see the value in that over defending their own opinions.</em></p>
<h2 id="使用standard"><a href="#使用standard" class="headerlink" title="使用standard"></a>使用standard</h2><p>好了，开始使用standard吧。</p>
<ol>
<li><p>新建一个项目</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">$ mkdir my-project&#10;$ cd my-project</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装standard</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">$ npm init&#10;$ npm install standard --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装snazzy，让代码检查的结果输出更加美观</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">$ npm install snazzy --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置package.json, 添加一条名为lint的npm script</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line"> <span class="string">"lint"</span>: <span class="string">"standard --verbose | snazzy"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在项目下新建一个app.js文件,随意输入一些代码并保存</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// app.js             // 错误说明</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;          <span class="comment">// 结尾不应该有分号，而且a定义了没有使用</span></span><br><span class="line"><span class="keyword">const</span> f = () =&gt; &#123;&#125;    <span class="comment">// f定义了但是没有使用</span></span><br><span class="line"></span><br><span class="line">log()                 <span class="comment">// log未定义</span></span><br></pre></td></tr></table></figure>
<ol>
<li><p>运行代码检查</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">$npm run lint</span><br></pre></td></tr></table></figure>
</li>
<li><p>看到检查结果</p>
</li>
</ol>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">1:7   error  &#39;a&#39; is assigned a value but never used  no-unused-vars&#10;1:12  error  Extra semicolon                         semi&#10;2:7   error  &#39;f&#39; is assigned a value but never used  no-unused-vars&#10;4:1   error  &#39;log&#39; is not defined                    no-undef</span><br></pre></td></tr></table></figure>
<h2 id="standard的更多功能"><a href="#standard的更多功能" class="headerlink" title="standard的更多功能"></a>standard的更多功能</h2><ol>
<li>使用<a href="https://github.com/standard/standard#are-there-text-editor-plugins" target="_blank" rel="external">编辑器插件</a>，实时检查代码规范</li>
<li><a href="https://github.com/standard/standard#how-do-i-ignore-files" target="_blank" rel="external">忽略</a>某些不需要执行代码规范的文件</li>
<li><a href="https://github.com/standard/standard#how-do-i-hide-a-certain-warning" target="_blank" rel="external">局部禁用</a>代码检查</li>
<li><a href="https://github.com/standard/standard#i-use-a-library-that-pollutes-the-global-namespace-how-do-i-prevent-variable-is-not-defined-errors" target="_blank" rel="external">指定全局变量</a>，以避免变量未定义错误</li>
<li><a href="https://github.com/standard/standard#is-there-a-git-pre-commit-hook" target="_blank" rel="external">git pre-commit</a>钩子，在每次commit之前检查代码规范</li>
<li><a href="https://github.com/standard/standard#how-do-i-use-experimental-javascript-es-next-features" target="_blank" rel="external">为更多最新的JS语法添加检查规范</a></li>
<li><a href="https://github.com/standard/standard#is-there-an-automatic-formatter" target="_blank" rel="external">自动修复</a></li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>standard应该是当前最好用的JS代码规范库，它无须更多配置，基本做到了安装即用，而且还有很多扩展功能，应该能够满足大多数项目的代码检查需求。</p>
<p>关于standard，如果你有任何问题可以来<a href="https://github.com/buildAll/buildall.github.io/issues/2" target="_blank" rel="external">这里</a>一起讨论。</p>
<p><em>赵彪原创，转载请注明出处</em></p>
</div><!-- comment system--><div class="container"><hr></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© 2017 <a href="/" rel="nofollow">Zhao Biao</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script></body></html>